<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WebEngineer — Développez votre activité</title>

  <!-- Polices modernes -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0c10;
      --card:#12141c;
      --ink:#e8f0ff;
      --muted:#9fb0c3;
      --primary:#ff7a59;      /* accent principal */
      --accent:#6ee7ff;       /* liseré doux */
      --shadow:0 10px 30px rgba(0,0,0,.45);
      --radius:18px;
      --speed:.75s;
      /* spacing */
      --space-1: 8px;
      --space-2: 12px;
      --space-3: 16px;
      --space-4: 24px;
      --space-5: 32px;
      --space-6: 48px;
      --section-space: clamp(36px, 6vw, 72px);
      --block-gap: clamp(20px, 3.5vw, 40px);
      --maxw:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 10% -10%,rgba(110,231,255,.08),transparent 60%),
        radial-gradient(900px 500px at 100% 0,rgba(255,122,89,.09),transparent 60%),
        var(--bg);
      line-height:1.5;
    }

    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:auto;padding:56px 20px 120px}

    /* Header + Nav */
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:var(--section-space)}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .dot{width:14px;height:14px;border-radius:50%;background:linear-gradient(180deg,var(--primary),#ff6a3d);box-shadow:0 0 0 3px rgba(255,122,89,.18)}
    .nav{display:flex;gap:18px;flex-wrap:wrap}
    .nav a{padding:8px 12px;border-radius:10px;border:1px solid transparent}
    .nav a:hover{border-color:rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
    .cta{background:linear-gradient(180deg,var(--primary),#ff6a3d);color:#fff;padding:10px 14px;border-radius:12px;font-weight:700;box-shadow:0 8px 24px rgba(255,122,89,.35)}

    header{text-align:center;padding:24px 0 12px}
    .title{margin:.25rem 0 0;font:700 clamp(42px,6.3vw,78px)/1 "Space Grotesk",Inter,sans-serif;letter-spacing:.01em}
    .tagline{margin:10px 0 0;font-weight:600;font-size:clamp(13px,1.2vw,16px);letter-spacing:.18em;text-transform:uppercase;color:var(--accent)}
    .sub{color:var(--muted);max-width:720px;margin:12px auto 0}
    .hero-cta{display:flex;gap:14px;justify-content:center;margin-top:18px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);backdrop-filter:blur(6px);font-weight:700}
    .btn.primary{background:linear-gradient(180deg,var(--primary),#ff6a3d);border:none;color:#fff;box-shadow:0 8px 24px rgba(255,122,89,.35)}

    /* Mobile nav + responsive helpers */
    .hamburger{display:none;align-items:center;justify-content:center;width:40px;height:40px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);font-size:20px}
    @media (max-width:820px){
      .topbar{gap:10px}
      .hamburger{display:inline-flex}
      .nav{display:none;width:100%}
      .nav.open{display:flex;flex-direction:column;gap:10px;margin-top:8px}
      .nav a{display:block}
    }
    /* Global responsive tuning */
    .wrap{padding:40px 16px 96px}
    @media (max-width:540px){
      .title{font-size:clamp(34px,9vw,48px)}
      .hero-cta{gap:10px}
      .btn{padding:10px 14px}
    }
    /* Make preview stacks fluid */
    .stack{width:min(100%,360px);height:auto;aspect-ratio:16/10}
    @media (max-width:520px){.stack{width:100%;aspect-ratio:16/10}}
    /* Lightbox controls on small screens */
    @media (max-width:560px){
      .viewer{width:94vw;height:78vh}
      .ctrl{width:40px;height:40px}
      .ctrl.close{top:10px;right:10px}
    }

    /* Sections */
    .grid{margin-top:30px;display:grid;gap:36px}
    .stack-area{display:flex;align-items:center;gap:var(--block-gap)}
    .stack-area.reverse{flex-direction:row-reverse}
    @media (max-width:920px){.stack-area,.stack-area.reverse{flex-direction:column}}

    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));border:1px solid rgba(255,255,255,.07);border-radius:var(--radius);box-shadow:var(--shadow);padding:32px;flex:1 1 520px}
    h2{margin:0 0 .75rem;font:700 26px/1.15 "Space Grotesk",Inter,sans-serif}
    p.lead{margin:.5rem 0 1.25rem;color:var(--muted)}
    ul{margin:.25rem 0 0 1.1rem;padding:0}
    li{margin:.5rem 0}

    /* Piles d’images */
    .stack{flex:0 0 auto;position:relative;width:300px;height:188px;cursor:pointer}
    @media (max-width:520px){.stack{width:260px;height:162px}}
    .shot{position:absolute;inset:0;border-radius:14px;overflow:hidden;box-shadow:0 14px 30px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.06) inset;transform-origin:center; transition:transform .45s ease, box-shadow .45s ease;background:#000}
    .shot:nth-child(1){transform:rotate(-4deg) translate(-12px,8px) scale(.985); z-index:1}
    .shot:nth-child(2){transform:rotate(0deg) translate(0,0) scale(1); z-index:2}
    .shot:nth-child(3){transform:rotate(5deg) translate(14px,-10px) scale(.985); z-index:1}
    .shot img{width:100%;height:100%;object-fit:cover;display:block;opacity:.92; transition:opacity .4s ease}
    .stack:hover .shot{box-shadow:0 18px 40px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.09) inset}
    .stack:hover .shot:nth-child(1){transform:translate3d(-46px,22px,0) rotate(-12deg) scale(.975)}
    .stack:hover .shot:nth-child(2){transform:translate3d(0,-10px,0) rotate(0deg) scale(1.015)}
    .stack:hover .shot:nth-child(3){transform:translate3d(46px,-24px,0) rotate(11deg) scale(.975)}
    .stack:hover .shot img{opacity:1}

    /* Expansion + overlay */
    .overlay{position:fixed;inset:0;background:rgba(5,8,12,.62);opacity:0;pointer-events:none;transition:opacity .35s ease;z-index:60}
    .overlay.show{opacity:1;pointer-events:auto}
    .stack.expanded{position:fixed;z-index:70;left:50%;top:16vh;transform:translateX(-50%);width:min(1000px,92vw);height:32vh;max-height:320px}
    .stack.expanded .shot{transition:transform var(--speed) cubic-bezier(.22,.75,.1,1), box-shadow .45s ease;border-radius:16px}
    .stack.expanded .shot:nth-child(1){transform:translateX(-108%) rotate(0) scale(1)}
    .stack.expanded .shot:nth-child(2){transform:translateX(0) rotate(0) scale(1)}
    .stack.expanded .shot:nth-child(3){transform:translateX(108%) rotate(0) scale(1)}

    .open-btn{position:fixed;z-index:75;left:50%;top:calc(16vh + 32vh + 18px);transform:translate(-50%,6px); opacity:0; pointer-events:none;background:linear-gradient(180deg,var(--primary),#ff6a3d);color:#fff;border:none;border-radius:999px;padding:10px 14px;font-weight:700;font-size:.92rem; letter-spacing:.02em;box-shadow:0 8px 24px rgba(255,122,89,.35);transition:opacity .35s ease .45s, transform .35s ease .45s}
    .open-btn.show{opacity:1;transform:translate(-50%,0);pointer-events:auto}
    .open-btn:focus-visible{outline:3px solid rgba(255,255,255,.55);outline-offset:3px}
    .hint{font-size:.85rem;color:var(--muted);margin-top:10px;text-align:center}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(7,9,14,.9);display:none;z-index:90;align-items:center;justify-content:center}
    .lightbox.show{display:flex}
    .viewer{width:min(1100px,92vw); height:min(74vh,720px);background:var(--card); border:1px solid rgba(255,255,255,.08);border-radius:18px; box-shadow:var(--shadow); position:relative; overflow:hidden}
    .viewer img{width:100%;height:100%;object-fit:cover;display:block}
    .ctrl{position:absolute;top:50%;transform:translateY(-50%);border:none;background:rgba(0,0,0,.35);color:#fff;width:48px;height:48px;border-radius:50%;backdrop-filter:blur(6px);cursor:pointer;font-size:22px}
    .ctrl:hover{background:rgba(0,0,0,.55)}
    .ctrl.prev{left:14px}
    .ctrl.next{right:14px}
    .ctrl.close{top:14px;right:14px;transform:none;width:auto;height:auto;border-radius:10px;padding:8px 12px;font-weight:700;font-size:.95rem;letter-spacing:.01em}
    .credit{position:absolute;bottom:10px;right:12px;color:rgba(255,255,255,.75);font-size:.8rem}

    /* Boutique de modèles */
    .models{margin-top:var(--section-space)}
    .models h2{display:flex;align-items:center;gap:10px}
    .grid-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:14px}
    @media (max-width:960px){.grid-cards{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.grid-cards{grid-template-columns:1fr}}
    .card.product{padding:0;overflow:hidden;display:flex;flex-direction:column}
    .product .thumb{position:relative;height:190px;background:#000}
    .product .thumb img{width:100%;height:100%;object-fit:cover;display:block;opacity:.95}
    .badge{position:absolute;left:12px;top:12px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);font-size:.85rem}
    .product .body{padding:16px 16px 12px}
    .product h3{margin:0 0 6px;font:700 20px/1.15 "Space Grotesk",Inter,sans-serif}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px}
    .tag{font-size:.8rem;color:var(--muted);border:1px solid rgba(255,255,255,.08);padding:4px 8px;border-radius:999px}
    .price{font-weight:800;font-size:1.15rem}
    .actions{display:flex;gap:10px;margin-top:12px}
    .actions .btn{flex:1;justify-content:center}

    .notice{font-size:.9rem;color:var(--muted);margin-top:8px}

    /* Étapes */
    .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:var(--section-space)}
    @media (max-width:900px){.steps{grid-template-columns:1fr}}
    .step{padding:22px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01))}
    .step strong{display:block;margin-bottom:6px}

    /* Footer */
    footer{margin-top:var(--section-space);display:flex;gap:18px;flex-wrap:wrap;align-items:center;justify-content:space-between;color:var(--muted)}
    footer a{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <strong>WebEngineer</strong>
      </div>
      <button class="hamburger" id="navToggle" aria-label="Ouvrir le menu" aria-expanded="false">☰</button>
      <nav class="nav">
        <a href="#modeles">Modèles</a>
        <a href="#packs">Packs</a>
        <a class="cta" href="#modeles">Voir les modèles</a>
      </nav>
    </div>

    <header>
      <h1 class="title">WebEngineer</h1>
      <div class="tagline">Développez votre activité</div>
      <p class="sub">Choisissez un modèle prêt à l'emploi, branchez vos contenus et soyez en ligne en quelques heures. Besoin d'un sur‑mesure ? On s'en occupe aussi.</p>
      <div class="hero-cta">
        <a class="btn primary" href="#modeles">Parcourir les modèles</a>
        <a class="btn" href="#demarche">Comment ça marche</a>
      </div>
      <p class="hint">Cliquez sur une pile d’images pour prévisualiser la galerie.</p>
    </header>

    <!-- ====== Bloc 1 : photos à gauche / texte à droite ====== -->
    <section class="stack-area">
      <div class="stack"
           aria-label="Accès à la galerie — Exemple 1"
           data-gallery='[
             "https://images.unsplash.com/photo-1547658719-da2b51169166?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=1600&auto=format&fit=crop"
           ]'>
        <div class="shot"><img loading="lazy" alt="Aperçu site 1" src="https://images.unsplash.com/photo-1547658719-da2b51169166?q=80&w=1200&auto=format&fit=crop"></div>
        <div class="shot"><img loading="lazy" alt="Aperçu site 2" src="https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?q=80&w=1200&auto=format&fit=crop"></div>
        <div class="shot"><img loading="lazy" alt="Aperçu site 3" src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1200&auto=format&fit=crop"></div>
      </div>

      <div class="card">
        <h2>Création de votre site internet personnalisé</h2>
        <p class="lead">Rapide et abordable.</p>
        <ul>
          <li>Choisissez le modèle qui vous convient</li>
          <li>Transmettez vos éléments : photos, texte de présentation, liste de services</li>
          <li>Livraison d’une première version</li>
          <li>Dernières retouches et mise en ligne</li>
        </ul>
      </div>
    </section>

    <!-- ====== Bloc 2 : texte à gauche / photos à droite ====== -->
    <section class="stack-area reverse">
      <div class="card">
        <h2>Création sur‑mesure</h2>
        <p class="lead">Accompagnement dédié, du brief à la mise en ligne.</p>
        <ul>
          <li>Rendez‑vous avec un membre de l’équipe</li>
          <li>Transmission des éléments (photos, textes, services)</li>
          <li>Livraison d’une première version</li>
          <li>Dernières modifications et livraison finale</li>
        </ul>
      </div>

      <div class="stack"
           aria-label="Accès à la galerie — Exemple 2"
           data-gallery='[
             "https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?q=80&w=1600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1516259762381-22954d7d3ad2?q=80&w=1600&auto=format&fit=crop"
           ]'>
        <div class="shot"><img loading="lazy" alt="Aperçu site A" src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1200&auto=format&fit=crop"></div>
        <div class="shot"><img loading="lazy" alt="Aperçu site B" src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1200&auto=format&fit=crop"></div>
        <div class="shot"><img loading="lazy" alt="Aperçu site C" src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?q=80&w=1200&auto=format&fit=crop"></div>
      </div>
    </section>

    <!-- ====== Boutique de modèles ====== -->
    <section id="modeles" class="models">
      <h2>Modèles prêts à l'emploi</h2>
      <p class="lead">Chaque modèle inclut : pages essentielles, formulaire de contact, sections services/tarifs, FAQ, et instructions de personnalisation. Licence <strong>monosite</strong>.</p>
      <div class="grid-cards">
        <!-- Produit 1 -->
        <article class="card product">
          <div class="thumb">
            <img loading="lazy" src="https://images.unsplash.com/photo-1599050751790-7fd5b4b5f71a?q=80&w=1400&auto=format&fit=crop" alt="Template Coach Sportif">
            <span class="badge">Coach Sportif</span>
          </div>
          <div class="body">
            <h3>Template "Coach Pro"</h3>
            <div class="tags">
              <span class="tag">Calendly prêt</span>
              <span class="tag">Avis clients</span>
              <span class="tag">SEO de base</span>
            </div>
            <div class="price">59 €</div>
            <div class="actions">
              <a class="btn" href="https://example.com/demo/coach" target="_blank" rel="noreferrer">Voir la démo</a>
              <button class="btn primary buy-btn" data-paylink="REPLACE_WITH_STRIPE_LINK_COACH">Acheter</button>
            </div>
            <p class="notice">Compatible WordPress/Elementor ou version HTML statique.</p>
          </div>
        </article>

        <!-- Produit 2 -->
        <article class="card product">
          <div class="thumb">
            <img loading="lazy" src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1400&auto=format&fit=crop" alt="Template Paysagiste">
            <span class="badge">Paysagiste</span>
          </div>
          <div class="body">
            <h3>Template "GreenWorks"</h3>
            <div class="tags">
              <span class="tag">Avant/Après</span>
              <span class="tag">Devis rapide</span>
              <span class="tag">Galerie travaux</span>
            </div>
            <div class="price">59 €</div>
            <div class="actions">
              <a class="btn" href="https://example.com/demo/paysagiste" target="_blank" rel="noreferrer">Voir la démo</a>
              <button class="btn primary buy-btn" data-paylink="REPLACE_WITH_STRIPE_LINK_PAYSAGISTE">Acheter</button>
            </div>
            <p class="notice">Optimisé pour Google Business Profile.</p>
          </div>
        </article>

        <!-- Produit 3 -->
        <article class="card product">
          <div class="thumb">
            <img loading="lazy" src="https://images.unsplash.com/photo-1486739985386-d4fae04ca6f7?q=80&w=1400&auto=format&fit=crop" alt="Template Ménage">
            <span class="badge">Ménage</span>
          </div>
          <div class="body">
            <h3>Template "Clean&Co"</h3>
            <div class="tags">
              <span class="tag">Tarifs clairs</span>
              <span class="tag">Demande en 1 min</span>
              <span class="tag">FAQ SAP</span>
            </div>
            <div class="price">59 €</div>
            <div class="actions">
              <a class="btn" href="https://example.com/demo/menage" target="_blank" rel="noreferrer">Voir la démo</a>
              <button class="btn primary buy-btn" data-paylink="REPLACE_WITH_STRIPE_LINK_MENAGE">Acheter</button>
            </div>
            <p class="notice">Section Avance Immédiate incluse.</p>
          </div>
        </article>
      </div>
    </section>

    <!-- ====== Packs ====== -->
    <section id="packs" class="models">
      <h2>Packs</h2>
      <div class="grid-cards">
        <article class="card product">
          <div class="thumb">
            <img loading="lazy" src="https://images.unsplash.com/photo-1522199755839-a2bacb67c546?q=80&w=1400&auto=format&fit=crop" alt="Pack 3 modèles">
            <span class="badge">Pack 3 modèles</span>
          </div>
          <div class="body">
            <h3>Pack Lancement</h3>
            <div class="tags">
              <span class="tag">Coach + Paysagiste + Ménage</span>
              <span class="tag">‑20% vs à l'unité</span>
            </div>
            <div class="price">139 €</div>
            <div class="actions">
              <button class="btn primary buy-btn" data-paylink="REPLACE_WITH_STRIPE_LINK_PACK">Acheter le pack</button>
            </div>
            <p class="notice">Licences monosites séparées (3 domaines).</p>
          </div>
        </article>
      </div>
    </section>

    <!-- ====== Étapes ====== -->
    <section id="demarche" class="steps">
      <div class="step"><strong>1) Choisissez</strong> Sélectionnez un modèle et payez via un lien sécurisé (Stripe Payment Link, remplaçable ci‑dessous).</div>
      <div class="step"><strong>2) Recevez</strong> Vous recevez immédiatement le ZIP + guide PDF. Option : installation par nos soins.</div>
      <div class="step"><strong>3) Publiez</strong> Remplacez textes/photos et mettez en ligne. Support email en cas de besoin.</div>
    </section>

    <!-- ====== Footer ====== -->
    <footer>
      <div>© <span id="year"></span> WebEngineer — Tous droits réservés</div>
      <div>
        <a href="#">CGV</a> · <a href="#">Mentions légales</a> · <a href="#">Politique de confidentialité</a>
      </div>
    </footer>
  </div>

  <!-- Overlay + bouton partagé (pour les piles d’images) -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>
  <button class="open-btn" id="openBtn" type="button">Ouvrir la galerie</button>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog" aria-label="Galerie">
    <div class="viewer">
      <img id="lightboxImg" alt="Image de la galerie">
      <button class="ctrl close" id="closeLb" aria-label="Fermer">Fermer</button>
      <button class="ctrl prev" id="prevLb" aria-label="Précédent">&#10094;</button>
      <button class="ctrl next" id="nextLb" aria-label="Suivant">&#10095;</button>
      <div class="credit">Galerie d’exemple — remplacez les images par les vôtres</div>
    </div>
  </div>

  <script>
    /* ---------- Piles d’images → expansion + lightbox ---------- */
    const overlay = document.getElementById('overlay');
    const openBtn = document.getElementById('openBtn');
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightboxImg');
    const prevLb = document.getElementById('prevLb');
    const nextLb = document.getElementById('nextLb');
    const closeLb = document.getElementById('closeLb');

    let activeStack = null;
    let gallery = [];
    let index = 0;

    function expand(stack){
      if(activeStack) collapse();
      activeStack = stack;
      stack.classList.add('expanded');
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      openBtn.classList.add('show');
      openBtn.onclick = () => openGallery(stack);
      overlay.addEventListener('click', collapse, { once:true });
      document.addEventListener('keydown', escCollapse);
    }
    function collapse(){
      if(!activeStack) return;
      activeStack.classList.remove('expanded');
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      openBtn.classList.remove('show');
      document.removeEventListener('keydown', escCollapse);
      activeStack = null;
    }
    function escCollapse(e){ if(e.key === 'Escape') collapse(); }

    function openGallery(stack){
      const data = stack.getAttribute('data-gallery');
      try{ gallery = JSON.parse(data); } catch{ gallery = []; }
      if(!gallery.length){
        gallery = [...stack.querySelectorAll('img')].map(i => i.src);
      }
      index = 0;
      showSlide(0);
      lightbox.classList.add('show');
      document.addEventListener('keydown', lbKeys);
    }
    function closeGallery(){
      lightbox.classList.remove('show');
      document.removeEventListener('keydown', lbKeys);
    }
    function showSlide(step){
      index = (index + step + gallery.length) % gallery.length;
      lbImg.src = gallery[index];
    }
    function lbKeys(e){
      if(e.key === 'Escape') closeGallery();
      if(e.key === 'ArrowRight') showSlide(+1);
      if(e.key === 'ArrowLeft') showSlide(-1);
    }

    document.querySelectorAll('.stack').forEach(stack=>{
      stack.addEventListener('click', (e)=>{
        if(e.target.closest('button')) return;
        if(stack.classList.contains('expanded')) return;
        expand(stack);
      }, false);
    });

    nextLb.addEventListener('click', ()=>showSlide(+1));
    prevLb.addEventListener('click', ()=>showSlide(-1));
    closeLb.addEventListener('click', closeGallery);
    lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) closeGallery(); });

    /* ---------- Nav (hamburger) ---------- */
    const nav = document.querySelector('.nav');
    const navToggle = document.getElementById('navToggle');
    if(navToggle && nav){
      navToggle.addEventListener('click', ()=>{
        const isOpen = nav.classList.toggle('open');
        navToggle.setAttribute('aria-expanded', isOpen);
      });
    }

    /* ---------- Boutons d'achat (Payment Links) ---------- */
    document.querySelectorAll('.buy-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const url = btn.getAttribute('data-paylink');
        if(!url || url.startsWith('REPLACE_WITH')){
          alert('Configurez d\'abord votre lien de paiement Stripe et remplacez la valeur data-paylink.');
          return;
        }
        window.open(url, '_blank', 'noopener');
      });
    });

    /* Year */
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
